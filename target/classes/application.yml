spring:
  application:
    name: study-pro

  # ShardingSphere 数据源配置
  shardingsphere:
    datasource:
      names: master,slave
      master:
        type: com.zaxxer.hikari.HikariDataSource
        jdbc-url: jdbc:mysql://192.168.150.101:3306/study_pro?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=UTC&connectTimeout=10000&socketTimeout=30000&allowPublicKeyRetrieval=true
        username: root
        password: 123
        driver-class-name: com.mysql.cj.jdbc.Driver
        connection-timeout: 20000
        idle-timeout: 600000
        max-lifetime: 1800000
        maximum-pool-size: 20
        minimum-idle: 10
      slave:
        type: com.zaxxer.hikari.HikariDataSource
        jdbc-url: jdbc:mysql://192.169.150.4:3306/study_pro?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=UTC&connectTimeout=10000&socketTimeout=30000&allowPublicKeyRetrieval=true
        username: root
        password: mysql
        driver-class-name: com.mysql.cj.jdbc.Driver
        connection-timeout: 20000
        idle-timeout: 600000
        max-lifetime: 1800000
        maximum-pool-size: 20
        minimum-idle: 10
    rules:
      readwrite_splitting:
        data_sources:
          readwrite_ds:
            type: Static
            props:
              write-data-source-name: master
              read-data-source-names: slave
              load-balancer-name: round_robin
            load_balancers:
              round_robin:
                type: ROUND_ROBIN
    props:
      sql-show: true
    mode:
      type: Memory

  # 默认数据源使用 ShardingSphere
  datasource:
    driver-class-name: org.apache.shardingsphere.driver.ShardingSphereDriver
    jdbc-url: jdbc:shardingsphere:memory:readwrite_ds

  # Redis Configuration
  redis:
    host: localhost
    port: 6379
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1ms

  # Cache Configuration
  cache:
    type: redis
    redis:
      time-to-live: 3600000

  # Async Configuration
  task:
    execution:
      pool:
        core-size: 10
        max-size: 50
        queue-capacity: 1000
    scheduling:
      pool:
        size: 5

# Server Configuration
server:
  port: 8080

# Logging Configuration
logging:
  level:
    com.study:
      debug
    org.springframework.data.redis:
      info
    org.redisson:
      info
    org.apache.shardingsphere:
      info
